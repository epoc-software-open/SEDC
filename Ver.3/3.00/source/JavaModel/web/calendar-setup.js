Calendar.setup=function(a){function b(g,b){"undefined"==typeof a[g]&&(a[g]=b)}function h(a){if(a.params.flat)return"function"==typeof a.params.flatCallback?a.params.flatCallback(a):alert("No flatCallback given -- doing nothing."),!1;a.params.inputField&&(a.params.inputField.value=a.date.print(a.params.ifFormat));a.params.displayArea&&(a.params.displayArea.innerHTML=a.date.print(a.params.daFormat));a.params.singleClick&&a.dateClicked&&a.callCloseHandler();if("function"==typeof a.params.onUpdate)a.params.onUpdate(a)}
b("inputField",null);b("displayArea",null);b("button",null);b("eventName","click");b("ifFormat","%Y/%m/%d");b("daFormat","%Y/%m/%d");b("singleClick",!0);b("disableFunc",null);b("dateStatusFunc",a.disableFunc);b("mondayFirst",!0);b("align","Bl");b("range",[1900,2999]);b("weekNumbers",!0);b("flat",null);b("flatCallback",null);b("onSelect",null);b("onClose",null);b("onUpdate",null);b("date",null);b("showsTime",!1);b("timeFormat","24");b("displayRight",!1);var e=gx.dom.form()[a.inputField];if(null==e)return!1;
var e=e.value,f=["inputField","displayArea","button"],c;for(c in f)"string"==typeof a[f[c]]&&(a[f[c]]=document.getElementById(a[f[c]]));a.button&&(a.button.title=Calendar._TT.SEL_DATE);if(!a.flat&&!a.inputField&&!a.displayArea&&!a.button)return alert("Calendar.setup:\n  Nothing to setup (no fields found).  Please check your code"),!1;if(null!=a.flat){a.flat=document.getElementById(a.flat);if(!a.flat)return alert("Calendar.setup:\n  Flat specified but can't find parent."),!1;c=new Calendar(a.mondayFirst,
a.date,a.onSelect||h);c.showsTime=a.showsTime;c.time24="24"==a.timeFormat;c.params=a;c.weekNumbers=a.weekNumbers;c.setRange(a.range[0],a.range[1]);c.setDateStatusHandler(a.dateStatusFunc);c.create(a.flat);c.setDateFormat(a.ifFormat);c.parseDate(e,a.ifFormat);c.show();return!1}(a.button||a.displayArea||a.inputField)["on"+a.eventName]=function(){if(!a.inputField||gx.csv.validControls(gx.csv.lastId,gx.fn.vStructId(a.inputField.id),false)){var b=a.inputField||a.displayArea,c=a.inputField?a.ifFormat:a.daFormat,
e=false,d;window.calendar=d=new Calendar(a.mondayFirst,a.date,a.onSelect||h,a.onClose||function(a){a.hide()});d.showsTime=a.showsTime;d.time24=a.timeFormat=="24";d.weekNumbers=a.weekNumbers;e=true;d.setRange(a.range[0],a.range[1]);d.params=a;d.setDateStatusHandler(a.dateStatusFunc);d.setDateFormat(c);var c=a.displayArea||a.inputField,f;c&&gx.dom.hasClass(c,"DPScroll")&&(f=a.parentNode||c.parentNode);e&&d.create(f);d.parseDate(b.value||b.innerHTML,a.ifFormat);d.refresh();d.showAtElement(a.displayArea||
a.inputField,a.align)}return false}};
